# ç¬¬åä¸‰æ¬¡è¯¾å ‚æ€»ç»“

## é‡åŒ–ç­–ç•¥ç ”å‘æ¡ˆä¾‹

### æ¨¡å‹çš„è°ƒè¯•ä¿®æ­£

äº¤æ˜“æ‰§è¡Œä¸æŠ€æœ¯é€‰å‹

> å›æµ‹å¹³å°é€‰æ‹©ä¸ç‰¹æ€§
>
> è®¡ç®—å±‚é¢ç»´åº¦é€‰æ‹©ï¼šTICK/MIN
>
> ç³»ç»Ÿå±‚é¢æ“ä½œç³»ç»Ÿé€‰æ‹©ï¼šå¦‚LINUXæ“ä½œç³»ç»Ÿï¼Œæ— å¤šä½™çš„å¯è§†åŒ–æ„å»ºï¼Œé€‚åˆä¸“ä¸šé«˜é€Ÿçš„äº¤æ˜“å›¢é˜Ÿä¸ç­–ç•¥
>
> ç¼–ç¨‹è¯­è¨€å±‚é¢ï¼šC++ã€Python

ç­–ç•¥å±‚é¢åŸºæœ¬é€»è¾‘

> ç­–ç•¥é€»è¾‘çš„ä¼˜åŒ–
>
> å†æ¬¡è¿›è¡Œæ ·æœ¬å†…å¤–æµ‹è¯•
>
> å†æ¬¡è¿›è¡Œé²æ£’æ€§æ£€éªŒ

ä½“ç³»åŒ–ç ”å‘å…³é”®ç¯èŠ‚

> ç­–ç•¥é€»è¾‘ï¼šç¡®å®šäº¤æ˜“è§‚ç‚¹
>
> æ¨¡å‹æ„å»ºï¼šç”¨é‡åŒ–çš„ è¯­è¨€è¡¨è¾¾äº¤æ˜“è§‚ç‚¹
>
> æ¨¡å‹è°ƒè¯•ï¼šç­–ç•¥é€»è¾‘çš„ä¼˜åŒ–ã€æ ·æœ¬å†…å¤–æ£€éªŒä¸é²æ£’æ€§æµ‹è¯•
>
> äº¤æ˜“æ‰§è¡Œï¼šç³»ç»Ÿçš„æŠ€æœ¯é€‰å‹ã€å®ç›˜çš„ç»†èŠ‚å‡†å¤‡

### ç­–ç•¥é€»è¾‘å±‚é¢

 ç»å…¸çš„â€œä¹°å…¥ä¸‰æ³•â€ã€‚åœ¨é‡ä»·é½å‡ï¼Œå¹¶ä¸”å½¢æˆçªç ´æ—¶é¡ºåŠ¿ä¹°å…¥ï¼Œå½“ä¸Šå‡è¶‹åŠ¿è¢«æ‰“ç ´æ—¶å–å‡º
ä¹°å…¥ä¸‰æ³•çš„ä¸‰ä¸ªæ¡ä»¶ï¼š

> çœ‹KDæŒ‡æ ‡ï¼ŒKä¸Šç©¿D
>
> çœ‹å‡çº¿ï¼ŒKçº¿ä¸Šç©¿10æ—¥å‡çº¿
>
> çœ‹äº¤æ˜“é‡ï¼Œå½“æ—¥äº¤æ˜“é‡è¶…è¿‡10æ—¥äº¤æ˜“é‡å‡å€¼

åŸºäºâ€œè¶‹åŠ¿ä¸€æ—¦å½¢æˆï¼Œä¼šæ²¿æƒ¯æ€§è¿åŠ¨â€çš„äº¤æ˜“è§‚ç‚¹

è¯¥è§‚ç‚¹åˆ©ç”¨çš„æ˜¯äº¤æ˜“è€…åœ¨äº¤æ˜“è¿‡ç¨‹ä¸­çš„æƒ…ç»ªåå·®

æ¼«æ¼«ç†Šé€”-é¿å…æ·±å¥—

> æ™®é€šæ•£æˆ·è¡Œä¸ºç‰¹ç‚¹ï¼šä¸€æ—¦å¥—ç‰¢å°±ä¸å–äº†ï¼Œå°±æ˜¯ä¸è®¤è¾“ç¦»åœºã€‚è¿‡äº†ä¸€æ®µå†ä¸€çœ‹ï¼Œæ²¡é’±å›æœ¬äº†ã€‚
>
> é‡åŒ–ç³»ç»Ÿäº¤æ˜“è¡¨ç°ï¼šåˆ°äº†ä½ç½®è¦å‡ºåœºã€‚ä¿å­˜å­å¼¹ï¼Œç­‰å¾…æœºä¼šã€‚æ¼«é•¿çš„ç†Šå¸‚ä¸­åŠæ—¶å‡ºåœºå¾ˆé‡è¦ï¼Œåè€Œè¦äº¤æ˜“é¢‘ç¹ä¸€äº›ã€‚
>
> å¿ƒç†åå·®çº æ­£ï¼šè‡ªæˆ‘ç¡®è®¤åå·®ã€‚

ç¼“æ­¥ä¸Šæ¶¨è¡Œæƒ…ä¸­-é¿å…é”™å¤±æœºä¼š

> æ™®é€šæ•£æˆ·è¡Œä¸ºç‰¹ç‚¹ï¼šç»è¿‡äº†æ¼«æ¼«ç†Šé€”ï¼Œè¿è´¦å·å¯†ç éƒ½å¿˜äº†ã€‚æ¶¨ä¸Šå»æ‰å‘è§‰è¦è¿›åœºã€‚
>
> é‡åŒ–ç³»ç»Ÿäº¤æ˜“è¡¨ç°ï¼šäº¤æ˜“ä¸è¦è¿‡å°‘ï¼Œç¼“æ­¥ä¸Šæ¶¨ï¼ŒæŠ“ä½æœºä¼šä¸é”™è¿‡ã€‚
>
> å¿ƒç†åå·®çº æ­£ï¼šä¿å®ˆåå·®ã€‚

æ€¥é€Ÿä¸Šæ¶¨è¡Œæƒ…ä¸­-é¿å…æŒè‚¡ä¸ç‰¢

> æ™®é€šæ•£æˆ·è¡Œä¸ºç‰¹ç‚¹ï¼šä»Šå¤©ä¹°ï¼Œæ˜å¤©å–ï¼Œçœ‹äº†ç›ˆåˆ©å°±é€ƒè·‘ï¼Œç»“æœé”™è¿‡äº†å¤§è¡Œæƒ…ï¼Œæˆ–è€…åªåƒä¸€æ®µï¼Œé”™è¿‡å¤§éƒ¨åˆ†åˆ©æ¶¦ã€‚
>
> é‡åŒ–ç³»ç»Ÿäº¤æ˜“è¡¨ç°ï¼šä¸åˆ°ä½ç½®ä¸è¦å–ã€‚ç‰›å¸‚ä¸­åªæœ‰7ç¬”äº¤æ˜“ã€‚å¹³å‡æŒä»“å¤§äº3ä¸ªæœˆã€‚æ€¥é€Ÿä¸Šæ¶¨ï¼Œé•¿æœŸæŒè‚¡å¾ˆé‡è¦ã€‚
>
> å¿ƒç†åå·®çº æ­£ï¼šæŸå¤±åŒæ¶åå·®ï¼›é¿å…åæ‚”åå·®ã€‚

æ€¥é€Ÿä¸‹è·Œè¡Œæƒ…-é¿å…æŠ¢åå¼¹

> æ™®é€šæ•£æˆ·è¡Œä¸ºç‰¹ç‚¹ï¼šçœ‹äº†å¤§è·ŒæŠ¢åå¼¹ï¼Œç¢°åˆ°è·Œåœå°±å¥—ç‰¢ã€‚å¥—ç‰¢äº†ä¹Ÿä¸å–ï¼Œè¿˜è¦è¡¥ä»“é™æˆæœ¬ã€‚
>
> é‡åŒ–ç³»ç»Ÿäº¤æ˜“è¡¨ç°ï¼šæ€¥é€Ÿä¸‹è·Œä¸­ï¼Œä¸æŠ¢åå¼¹å¾ˆé‡è¦ã€‚
>
> å¿ƒç†åå·®çº æ­£ï¼šå¿ƒé”šï¼Œå›ºå®šå’Œè°ƒæ•´åå·®ï¼›ä»£è¡¨æ€§åå·®ã€‚

### ç­–ç•¥é€»è¾‘çš„ä¼˜åŒ–

åŸºç¡€ç­–ç•¥

> ä¹°å…¥æ¡ä»¶ï¼šKDé‡‘å‰ã€RSIåœ¨ï¼ˆ40ï¼Œ70ï¼‰åŒºé—´ã€Kçº¿ä¸Šç©¿10æ—¥å‡çº¿
>
> å–å‡ºæ¡ä»¶ï¼šKçº¿ä¸‹ç©¿20æ—¥å‡çº¿
>
> ä»“ä½ï¼šå‡ä»“ï¼šæ€»èµ„é‡‘çš„80%
>
> æ ‡çš„ï¼š50ETF

ä¼˜åŒ–ä¸€ï¼šå¢åŠ åˆå§‹å¤´å¯¸ç®¡ç†

> ä»“ä½ï¼š150åŸºç‚¹æ³¢åŠ¨ç‡é£é™©å› å­ã€‚ä¸€ä¸ªå•ä½å¤´å¯¸ = æ€»èµ„é‡‘ * æ³¢åŠ¨ç‡é£é™©å› å­/Nå€¼

ä¼˜åŒ–äºŒï¼šå¢åŠ æ­¢ç›ˆå’Œæ­¢æŸ

> æ­¢ç›ˆæ­¢æŸï¼šè·Ÿè¸ªæ­¢æŸ3å€ATR

ä¼˜åŒ–ä¸‰ï¼šå¼•å…¥åŠ ä»“

> ä»“ä½ï¼š3å€ATRåŠ ä»“

ä¼˜åŒ–å››ï¼šåˆ†æ•£åŒ–-å¢åŠ æˆé•¿åˆ†æ ¼

> æ ‡çš„ï¼šåˆ›ä¸šæ¿ETF

å°ç»“

> æœ‰æ²¡æœ‰åšä¿¡å·ç³»ç»Ÿçš„æ”¹å˜
>
> ä¼˜åŒ–äº†é€€å‡ºçš„æ–¹å¼
>
> ä¼˜åŒ–äº†èµ„é‡‘ç®¡ç†çš„æ–¹å¼
>
> è¿›è¡Œäº†åˆ†æ•£åŒ–

é€€å‡ºæœºåˆ¶

> åŸºäºè·Ÿè¸ªçª—å£çš„TIP
>
> æ¥è§¦ä¸‹è¾¹æˆ–å³è¾¹å°±é€€å‡ºã€æå‰æ¥è§¦ä¸Šè¾¹å°±åŠ çª—å£

### å³°è°·äº¤æ˜“ç³»ç»Ÿ

ç­–ç•¥è®¾è®¡æ€æƒ³

> é‡‘èå¸‚åœºä¸­çš„ä»·æ ¼å†å²æ€»åœ¨ä¸åœçš„é‡å¤ç›¸ ä¼¼çš„è¿‡ç¨‹ï¼Œæ¯æ¬¡éƒ½ä¸å®Œå…¨ç›¸åŒã€‚äº¤æ˜“ç³»ç»Ÿ éœ€è¦è¯†åˆ«å·²ç»å‘ç”Ÿçš„å†å²ï¼Œå¹¶ä¸”ç¡®è®¤ç›®å‰ æ‰€åœ¨çš„ä½ç½®ã€‚ä½†æ˜¯å¹¶éæ˜¯æ‰€æœ‰çš„å†å²éƒ½æœ‰ ä»·å€¼ï¼Œåªæœ‰é‚£äº›ç‰¹åˆ«é‡è¦çš„å†å²è½¬æŠ˜ç‚¹ï¼Œ æ‰å…·å¤‡è®°å½•çš„ä»·å€¼ã€‚åœ¨å›¾è¡¨ä¸Šï¼Œå®ƒä»¬ä½“ç° ä¸ºç›¸å¯¹å‰§çƒˆçš„ä»·æ ¼è½¬å‘ã€‚è¿™äº›è½¬å‘ç‚¹å°±å¯ ä»¥ä¸ºæˆ‘ä»¬äº¤æ˜“æä¾›å‚è€ƒã€‚ 
>
> åœ¨å³°è°·äº¤æ˜“ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è®°å½•äº†è¿™äº›è½¬æŠ˜ ç‚¹ï¼Œå¹¶ä¸”åšå¤šä¸ªè½¬æŠ˜ç‚¹çš„æå€¼è®°å½•ã€‚åœ¨æ å€¼ç‚¹å¤„æˆ‘ä»¬å°±å¾—åˆ°äº†å±±å³°å’Œå±±è°·çš„ä½ç½®ã€‚

ç­–ç•¥æ¨¡å‹è®¾ç½®

> æ ‡çš„é€‰æ‹©ï¼šå³°è°·ç³»ç»Ÿå¯¹äºäº¤æ˜“æ ‡çš„æœ‰æ¯”è¾ƒå¤§çš„ä¾èµ–ï¼Œå®ƒå¯¹äºæ³¢åŠ¨ç‡å¾ˆå°ï¼ŒæµåŠ¨æ€§è¾ƒå·®çš„æ ‡çš„æ˜¯ä¸é€‚åˆçš„ï¼Œå› æ­¤åœ¨é€‰æ‹©æ ‡çš„çš„æ—¶å€™å¿…é¡»è€ƒè™‘åˆ°æ³¢åŠ¨ç‡å’ŒæµåŠ¨æ€§çš„é—®é¢˜ã€‚
>
> äº¤æ˜“é€»è¾‘ï¼šçªç ´å‰æœŸå±±å³°ç‚¹ï¼Œä¸”å‰æœŸå±±å³°å’Œå±±è°·çš„å‚ç›´è½å·®å¤§äº1.5ä¸ªATRã€‚å½“å‰æ— å¤šä»“ã€‚å¹³ç©ºä»“ï¼Œå¼€å¤šä»“ã€‚ çªç ´ï¼ˆè·Œç ´ï¼‰å‰æœŸå±±è°·ä½ç‚¹ï¼Œä¸”å‰æœŸå³°è°·å‚ç›´è½å·®å¤§äº1.5ä¸ª ATRã€‚å½“å‰æ— ç©ºä»“ã€‚å¹³å¤šä»“ï¼Œå¼€ç©ºä»“ã€‚
>
> ç­–ç•¥å‚æ•°ï¼šç”±äºå³°è°·ç³»ç»Ÿä»…ä»…æ˜¯å¯¹å†å²è¿›è¡Œäº†ç»Ÿè®¡ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œ ä»»ä½•çš„å›å½’æ“ä½œï¼Œæ‰€ä»¥å®ƒçš„ä¿¡å·ç³»ç»Ÿä¸­ä¸å­˜åœ¨å‚æ•°ã€‚ ä½†æ˜¯åœ¨å®ƒçš„äº¤æ˜“ç³»ç»Ÿä¸­å­˜åœ¨æ­¢æŸï¼Œæ­¢ç›ˆï¼Œæ³¢åŠ¨ç‡åˆ†æç­‰éœ€è¦å‚æ•°çš„æ¨¡å—ã€‚
>
> ä»“ä½ç®¡ç†ï¼šä¼˜åŒ–çš„æµ·é¾Ÿçš„ä»“ä½ç®¡ç†åŠæ³•ï¼Œåœ¨æ–¹å‘é€‰æ‹©å’Œå®é™…å¸‚åœºè¿è¡Œæ–¹å‘ä¸€è‡´æ—¶ï¼Œæ¯è¿è¡Œå¤§äºç­‰äºä¸€ä¸ªATRã€‚åˆ™åŠ ä»“ä¸€æ¬¡ã€‚æ¯æ ¹Baråªå…è®¸åŠ ä»“ä¸€æ¬¡ã€‚ æ¯æ¬¡åŠ ä»“çš„æ‰‹æ•°æŒ‰ç…§å½“å‰çš„é£é™©æ¥åŠ¨æ€è°ƒæ•´ã€‚
>
> æ­¢æŸæ¨¡å—ï¼šå³°è°·ç³»ç»Ÿçš„å…¥åœºç‚¹é€‰æ‹©éå¸¸æ¿€è¿›ï¼Œå®ƒå¹¶ä¸è¿½æ±‚å…¥åœºçš„æˆåŠŸç‡ã€‚å› æ­¤æ­¢æŸå¯¹äºå³°è°·ç³»ç»Ÿéå¸¸é‡è¦ï¼Œæ­¢æŸç‚¹è®¾ç½®åœ¨å…¥åœºç‚¹çš„ä¸Šä¸‹3ä¸ªATRå¤„ã€‚ä»¥ä¿è¯åœ¨åšé”™äº†æ–¹å‘çš„æ—¶å€™ä¸ä¼šäºæŸå¤ªå¤šã€‚
>
> é£é™©æ§åˆ¶ï¼šå³°è°·ç³»ç»Ÿå…·æœ‰åŠ¨æ€çš„é£é™©æ§åˆ¶ç³»ç»Ÿï¼Œå®ƒä¼šå¯¹å½“å‰çš„æ³¢åŠ¨ç‡å’Œä¹‹å‰ä¸€æ®µé˜¶æ®µçš„æ³¢åŠ¨ç‡è¿›è¡Œæ¯”è¾ƒï¼ŒåŠ¨æ€è°ƒæ•´æŠ•èµ„çš„é£é™©æ¯”ç‡ã€‚å› æ­¤å¯ä»¥å¾ˆå¥½çš„æ§åˆ¶æŠ•èµ„é£é™©ã€‚åªè¦èƒœç‡åœ¨40%ä»¥ä¸Šï¼Œéƒ½å¯ä»¥è·å¾—è¾ƒé«˜çš„å›æŠ¥é£é™©æ¯”ã€‚
>
> æ­¢ç›ˆæ¨¡å—ï¼šå³°è°·ç³»ç»Ÿé‡‡ç”¨åŠ¨æ€è·Ÿè¸ªæ­¢ç›ˆçš„åŠæ³•ï¼Œå½“ç›ˆåˆ©è¾¾åˆ°Nï¼ˆN>10ï¼‰ä¸ªATRæ—¶ï¼Œå¯åŠ¨æ­¢ç›ˆï¼Œæ­¢ç›ˆç‚¹è®¾ç½®ä¸ºå½“å‰äº¤æ˜“æ‰€ç»å†çš„æå€¼ç‚¹çš„ä¸‹æ–¹ï¼ˆå¤šä»“ï¼‰/ä¸Šæ–¹ï¼ˆç©ºä»“ï¼‰è·ç¦» 2.5ä¸ªATRã€‚
>
> æŠ•èµ„åˆ†æ•£ï¼šå³°è°·ç³»ç»Ÿå¯¹äºå¤§å¤šæ•°æµåŠ¨æ€§è¾ƒå¥½çš„é»‘è‰²ç³»å’Œæœ‰è‰²ç³»ï¼Œ ä»¥åŠæ³¢åŠ¨æ€§è¾ƒå¤§çš„æ©¡èƒ¶ç­‰äº§å“å…·æœ‰è¾ƒå¥½çš„ç­–ç•¥æ€§èƒ½ã€‚ å•ä¸ªæ ‡çš„é£é™©æ§åˆ¶åœ¨æŠ•å…¥èµ„é‡‘çš„30% ä»¥ä¸‹ï¼Œç»„åˆé£é™© åœ¨æŠ•å…¥èµ„é‡‘çš„10%ä»¥ä¸‹ã€‚ç»„åˆé£é™©å›æŠ¥æ¯”è¶…è¿‡1:6ï¼Œå¤æ™®æ¯”ç‡è¶…è¿‡2.3ã€‚

èµ„é‡‘ç®¡ç†ç³»ç»Ÿ

> ç”±äºå³°è°·ç³»ç»Ÿçš„åŸå§‹å…¥åœºä¿¡å·çš„èƒœç‡å¾ˆä½ï¼Œå¿…é¡»è¦é™ä½è¯•é”™æˆæœ¬ï¼Œå¢åŠ åœ¨è·èƒœäº¤æ˜“ä¸­çš„è·åˆ©ã€‚
>
> å› æ­¤ï¼š 1. å¿…é¡»è¦é‡‡ç”¨é¡ºåŠ¿åŠ ä»“çš„åŠæ³•ã€‚ 2. æ¯æ¬¡æŠ•å…¥èµ„é‡‘å¿…é¡»å¯ä»¥åŠ¨æ€è°ƒæ•´ã€‚ 3. æ³¢åŠ¨ç‡å˜å¤§æ—¶ï¼Œåº”è¯¥é™ä½æŠ•å…¥ã€‚
>
> æµ·é¾Ÿäº¤æ˜“ç³»ç»Ÿçš„èµ„é‡‘ç®¡ç†åŠæ³•å’Œå³°è°·ç³»ç»Ÿæ˜¯ç›¸å®¹çš„ã€‚ åŸå› æ˜¯ä¸¤è€…éƒ½æ˜¯çªç ´ç³»ç»Ÿï¼Œè€Œä¸”éƒ½å­˜åœ¨èƒœç‡ä¸é«˜ï¼Œå›æŠ¥é£é™©æ¯”é«˜çš„ç‰¹å¾ã€‚ æµ·é¾Ÿç³»ç»Ÿæ ¹æ®ATRæŒ‡æ ‡æ¥å†³å®šæŠ•å…¥çš„å¤´å¯¸ï¼ŒATRè¶Šå°ï¼Œå¤´å¯¸è¶Šå¤§ï¼ŒATRè¶Šå¤§ï¼Œå¤´å¯¸è¶Šå°ã€‚ æˆ‘ä»¬ä½¿ç”¨æµ·é¾Ÿçš„å¤´å¯¸ç®¡ç†åŠæ³•ä½œä¸ºåŸºå‡†ï¼Œç„¶åå¼•å…¥åŠ¨æ€å¤´å¯¸ç®¡ç†ï¼Œå…·ä½“çš„åŠæ³•æ˜¯ä½¿ç”¨å¡æ–¹åˆ†å¸ƒå‡½æ•°çŸ«æ­£ã€‚
>
> å¡æ–¹åˆ†å¸ƒå…·æœ‰å…¸å‹çš„å·¦å€¾åˆ†å¸ƒç‰¹å¾ï¼Œå®ƒåœ¨æ•°å€¼è¾ƒå°æ—¶è¶‹è¿‘0ï¼Œä½†åœ¨æ•°å€¼è¾¾åˆ°ä¸´ç•Œå€¼åè¿…é€Ÿä¸Šå‡ï¼Œéšåç¼“æ…¢ä¸‹é™åˆ°é›¶ã€‚è¿™ä¸ªåˆ†å¸ƒå¯¹äºæŠ•æ³¨ç®¡ç†ååˆ†æœ‰æ•ˆã€‚å®ƒå¯ä»¥ç”¨æ¥çŸ«æ­£é™æ€èµ„é‡‘ç®¡ç†æ–¹æ¡ˆã€‚
>
> æ³¢åŠ¨ç‡çŸ«æ­£ï¼šé€šè¿‡æ¯”è¾ƒè¿‘æœŸï¼Œå‰æœŸï¼Œæ›´å‰æœŸçš„ä¸­ä½æ•°ä»·æ ¼ï¼ˆH+L+2*Cï¼‰/4çš„ Næ ¹Barï¼ˆN~20-50ï¼‰æ ‡å‡†å·®ï¼Œ ç¡®å®šå½“å‰æ˜¯æ³¢åŠ¨ç‡å•è°ƒå˜å°çš„é˜¶æ®µè¿˜æ˜¯æ³¢åŠ¨ç‡é€’å¢çš„é˜¶æ®µã€‚ å¦‚æœæ³¢åŠ¨ç‡å˜å°ï¼Œé‚£ä¹ˆå°±è°ƒå¤§é£é™©å› å­ï¼Œå¦‚æœæ³¢åŠ¨ç‡å˜å¤§ï¼Œé‚£ä¹ˆå°±è°ƒä½é£é™©å› å­ã€‚

ç­–ç•¥æ€§èƒ½è¯„ä¼°

> å•ä¸€å“ç§çš„é£é™©å®¹æ˜“é›†ä¸­
>
> éœ€è¦è¿›è¡Œåˆ†æ•£åŒ–é™ä½æ•´ä½“é£é™© 
>
> åœ¨ç›¸å…³æ€§å¼±çš„æ¿å—é—´è¿›è¡Œé…ç½®
>
> 1. äº¤æ˜“è¾ƒç¨³å®š 2. æ¿€è¿›å…¥åœº 3. é¢‘ç‡é€‚ä¸­ 4. å‚æ•°ä¾èµ–å°‘ 5. å›æŠ¥é£é™©æ¯”ç‡é«˜ 6. èƒœç‡è¾ƒä½ 7. èµ„ç®¡ç‰¹åˆ«é‡è¦ 8. æœˆåº¦ç›ˆåˆ©ç¨³å®š 9. åˆ†æ•£æŠ•èµ„æ€§èƒ½æå‡å¤§ 10.éœ‡è¡æœŸä¸ä¼šäº¤æ˜“

### æ­£æ€æ€§æ£€éªŒ

æ£€éªŒè‚¡ç¥¨å¯¹æ•°æ”¶ç›Šç‡çš„æ­£æ€æ€§ï¼Œåˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿå°†æ¨¡å‹åº”ç”¨åˆ°è¯¥è‚¡ç¥¨ä¸Šã€‚

é¢‘ç‡ç›´æ–¹å›¾

 ```python
import numpy as np
import matplotlib.pyplot as plt
# è®¡ç®—æ—¥æ”¶ç›Šç‡çš„å¯¹æ•°
log_returns = np.log(s[1:]/s[0:-1])
# ç”»å‡ºæ ‡å‡†çš„æ¦‚ç‡å¯†åº¦æ›²çº¿
x = np.arange(-5,5,0.1)
plt.plot(x, scs.norm.pdf(x, loc=0, scale=1))
plt.plot(x, scs.norm.pdf(x, loc=0, scale=2))
plt.legend(['norm=1','norm=2'])
# ç”»å‡ºæ—¥æ”¶ç›Šç‡å¯¹æ•°çš„ç›´æ–¹å›¾
plt.hist(log_returns.flatten(), bins=70, density=True, label='frequency')
plt.grid(True)
plt.xlabel('log-return')
plt.ylabel('frequency')
x = np.linspace(plt.axis()[0], plt.axis()[1])
plt.plot(x, scs.norm.pdf(x, loc=log_returns.mean(), scale=log_returns.std()),'r', lw=2.0, label='pdf') # scs.norm.pdfè¡¨ç¤ºæ¦‚ç‡å¯†åº¦å‡½æ•°
plt.legend()
 ```

åˆ†ä½æ•°-åˆ†ä½æ•°å›¾

> å°†å¾…ç”»çš„åºåˆ—ä»å°åˆ°å¤§æ’åˆ—ï¼Œæ¯ä¸ªæ•°æ®å¯¹åº” qqplot ä¸Šçš„ä¸€ä¸ªç‚¹
>
> è¯¥ç‚¹çš„çºµåæ ‡ä¸ºè¯¥ç‚¹å¯¹åº”æ•°æ®çš„æ•°å€¼
>
> è¯¥ç‚¹çš„æ¨ªåæ ‡ä¸ºè¯¥ç‚¹å¯¹åº”æ•°æ®åœ¨æ•°åˆ—ä¸­å¯¹åº”ä½ç½®çš„åˆ†ä½æ•°åœ¨æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­å¯¹åº”çš„éšæœºå˜é‡ã€‚

```python
import statsmodels.api as sm
fig, axes = plt.subplots(2,2,figsize=(10,12))
sm.qqplot(np.random.normal(0,1,1000), line='45', ax=axes[0,0])
sm.qqplot(np.random.normal(1,1,1000), line='45', ax=axes[0,1])
sm.qqplot(np.random.normal(0,2,1000), line='45', ax=axes[1,0])
sm.qqplot(np.random.normal(1,2,1000), line='45', ax=axes[1,1])
sm.qqplot(log_returns.flatten()[::500], line='s')
#æ•°æ®ä¸­æ¯500ä¸ªç‚¹å–ä¸€ä¸ªç‚¹ï¼Œä¸»è¦æ˜¯ä¸ºäº†åŠ å¿«è¿ç®—é€Ÿåº¦
plt.grid(True)
plt.xlabel('theoretical quantiles')
plt.ylabel('sample quantiles')
```

> è‹¥æ•£ç‚¹å’Œçº¿å¾ˆæ¥è¿‘ï¼Œè¯´æ˜æ•°æ®åˆ†å¸ƒæ¥è¿‘æ­£æ€åˆ†å¸ƒ
>
> è‹¥å·¦ä¾§æ•£ç‚¹ä½äºçº¿ï¼Œå³ä¾§æ•£ç‚¹é«˜äºçº¿ï¼Œè¯´æ˜æ•°æ®åˆ†å¸ƒæ›´â€œåšå°¾â€
>
> è‹¥å·¦ä¾§æ•£ç‚¹é«˜äºçº¿ï¼Œå³ä¾§æ•£ç‚¹ä½äºçº¿ï¼Œè¯´æ˜æ•°æ®åˆ†å¸ƒæ›´â€œé›†ä¸­â€

å®šé‡æ–¹æ³•

> ååº¦ï¼ˆskewnessï¼‰ï¼š$S = E((\frac{X-\mu}{\sigma})^3)$
>
> å³°åº¦ï¼ˆkurtosisï¼‰ï¼š$K=E((\frac{X-\mu}{\sigma})^4)-3$
>
> æ­£æ€åˆ†å¸ƒçš„ååº¦ã€å³°åº¦å‡ä¸º0ï¼Œè‹¥æ ·æœ¬çš„ååº¦ã€å³°åº¦æ¥è¿‘0ï¼Œåˆ™å¯ä»¥è®¤ä¸ºæ•°æ®æœä»æ­£æ€åˆ†å¸ƒ
>
> å‡è®¾æ£€éªŒæ³•â€”â€”ååº¦æ£€éªŒã€å³°åº¦æ£€éªŒã€æ­£æ€æ€§æ£€éªŒï¼šè¾“å‡ºpå€¼ï¼Œè‹¥på€¼é«˜äº0.05ï¼Œåˆ™è¯´æ˜æ•°æ®æœä»æ­£æ€åˆ†å¸ƒï¼ˆpå€¼æ„ä¹‰ï¼šæ‹’ç»â€œæ ·æœ¬æœä»æ­£æ€åˆ†å¸ƒâ€å‡è®¾çš„çŠ¯é”™è¯¯æ¦‚ç‡ï¼‰

```python
import scipy.stats as scs
def normality_tests(arr):
    print("Skew of data set  %14.3f" % scs.skew(arr))
    print("Skew test p-value %14.3f" % scs.skewtest(arr)[1])
    print("Kurt of data set  %14.3f" % scs.kurtosis(arr))
    print("Kurt test p-value %14.3f" % scs.kurtosistest(arr)[1])
    print("Norm test p-value %14.3f" % scs.normaltest(arr)[1])
normality_tests(log_returns.flatten())
```

```python
import scipy.stats as scs
def print_statistics(array):
    sta = scs.describe(array)
    print("%14s %15s" % ('statistic', 'value'))
    print(30 * "-")
    print("%14s %15.5f" % ('size', sta[0]))
    print("%14s %15.5f" % ('min', sta[1][0]))
    print("%14s %15.5f" % ('max', sta[1][1]))
    print("%14s %15.5f" % ('mean', sta[2]))
    print("%14s %15.5f" % ('std', np.sqrt(sta[3])))
    print("%14s %15.5f" % ('skew', sta[4]))
    print("%14s %15.5f" % ('kurtosis', sta[5]))
print_statistics(log_returns.flatten())
```

### æŠ•èµ„ç»„åˆä¼˜åŒ–

ç°ä»£æŠ•èµ„ç†è®º

> å¯¹æ•°æ”¶ç›Šç‡æ­£æ€åˆ†å¸ƒæ˜¯åŸºç¡€
>
> åªç”¨å‡å€¼ã€æ–¹å·®å³å¯å®Œæ•´æè¿°æ”¶ç›Šåˆ†å¸ƒ
>
> é€šè¿‡åˆ†æ•£æŠ•èµ„ï¼Œå®ç°æŠ•èµ„ç»„åˆé£é™©æœ€å°åŒ–æˆ–è€…åœ¨æŒ‡å®šé£é™©æ°´å¹³ä¸‹æ”¶ç›Šæœ€å¤§åŒ–

å‡å€¼æ–¹å·®è®¡ç®—

```python
# å¯¹æ•°æ”¶ç›Šç‡
rets = np.log(data / data.shift(1))
# å‡å€¼ï¼ˆå¹´åŒ–ï¼Œ252ä¸ªäº¤æ˜“æ—¥ï¼‰
rets.mean() * 252
# æ–¹å·®ï¼ˆåæ–¹å·®çŸ©é˜µï¼‰
rets.cov() * 252
```

å‡å®šæŠ•èµ„è€…ä¸å…è®¸åœ¨æŸç§è¯åˆ¸ä¸Šå»ºç«‹ç©ºå¤´å¤´å¯¸

åªå…è®¸å¤šå¤´å¤´å¯¸æ„å‘³ç€æŠ•èµ„è€…çš„è´¢å¯Œå°†åœ¨å¯ç”¨èµ„äº§ä¸­åˆ†é…ï¼Œæ‰€æœ‰å¤´å¯¸å‡ä¸ºå¤šå¤´(æ­£)å¤´å¯¸ï¼Œä¸”å¤´å¯¸çš„æ€»å’Œä¸º100%

```python
# éšæœºç”Ÿæˆ5ç§èµ„äº§çš„æŠ•èµ„æƒé‡
weights = np.random.random(5)
weights /= np.sum(weights)
# æŠ•èµ„ç»„åˆçš„é¢„æœŸæ”¶ç›Š
np.sum(rets.mean() * weights) * 252
# é¢„æœŸæŠ•èµ„ç»„åˆçš„æ–¹å·®ï¼ˆW^Tâˆ‘Wï¼‰
sigma2 = np.dot(weights.T, np.dot(rets.cov() * 252, weights))
# é¢„æœŸæŠ•èµ„ç»„åˆçš„æ ‡å‡†å·®
sigma = np.sqrt(sigma2)
```

æœ‰æ•ˆè¾¹ç•Œ

> ç»™å®šé£é™©æ°´å¹³ä¸‹æœ€å¤§åŒ–æ”¶ç›Šçš„æŠ•èµ„ç»„åˆæ„æˆçš„é›†åˆè¾¹ç•Œ
>
> ç­‰ä»·äºç”±æ‰€æœ‰æ”¶ç›Šç‡é«˜äºç»å¯¹æœ€å°æ–¹å·®æŠ•èµ„ç»„åˆçš„æœ€ä¼˜æŠ•èµ„ç»„åˆæ„æˆçš„é›†åˆ
>
> è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿï¼Œéšæœºç”Ÿæˆè¾ƒå¤§è§„æ¨¡çš„æŠ•èµ„ç»„åˆæƒé‡å‘é‡w
>
> å¯¹äºæ¯ä¸€ç§æ¨¡æ‹Ÿæƒé‡ï¼Œè®¡ç®—å™¨é¢„æœŸæŠ•èµ„ç»„åˆæ”¶ç›Šã€æ ‡å‡†å·®ã€å¤æ™®æ¯”ç‡ï¼ˆæŠ•èµ„ç»„åˆæ”¶ç›Šç‡å‡æ— é£é™©åˆ©ç‡é™¤æ ‡å‡†å·®ï¼‰

```python
prets = []
pvols = []
for p in range (2500):
    weights = np.random.random(noa)
    weights /= np.sum(weights)
    prets.append(np.sum(rets.mean() * weights) * 252)
    pvols.append(np.sqrt(np.dot(weights.T, 
                        np.dot(rets.cov() * 252, weights))))
prets = np.array(prets)
pvols = np.array(pvols)

plt.figure(figsize=(8, 4))
plt.scatter(pvols, prets, c=prets / pvols, marker='o')
plt.grid(True)
plt.xlabel('expected volatility')
plt.ylabel('expected return')
plt.colorbar(label='Sharpe ratio')
```

ç”¨æœ€ä¼˜åŒ–æ–¹æ³•æ±‚æœ‰æ•ˆè¾¹ç•Œ

```python
import scipy.optimize as sco
# å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸ºæƒé‡ï¼Œè¿”å›æŠ•èµ„ç»„åˆæ”¶ç›Šã€æ–¹å·®ã€å¤æ™®
def statistics(weights):
    weights = np.array(weights)
    pret = np.sum(rets.mean() * weights) * 252
    pvol = np.sqrt(np.dot(weights.T, np.dot(rets.cov() * 252, weights)))
    return np.array([pret, pvol, pret / pvol])
# å®šä¹‰ç›®æ ‡å‡½æ•°ï¼ˆæœ€å¤§åŒ–å¤æ™®ï¼‰
def min_func_sharpe(weights):
    return -statistics(weights)[2]
# ç­‰å¼çº¦æŸä¸ºæ‰€æœ‰æƒé‡ä¹‹å’Œä¸º1
cons = ({'type': 'eq', 'fun': lambda x:  np.sum(x) - 1})
# å†³ç­–å˜é‡ï¼ˆæƒé‡ï¼‰ä¸Šä¸‹ç•Œçº¦æŸ
bnds = tuple((0, 1) for x in range(5))
# ä¼˜åŒ–ç®—æ³•éœ€è¦è®¾ç½®åˆå§‹å€¼
5 * [1. / 5,]

opts = sco.minimize(min_func_sharpe, 5 * [1. / 5,], method='SLSQP',
                       bounds=bnds, constraints=cons)
# æœ€ä¼˜æƒé‡
opts['x'].round(3)
# æœ€ä¼˜æƒé‡ä¸‹çš„ç»“æœï¼ˆæ”¶ç›Šç‡ã€æ ‡å‡†å·®ã€å¤æ™®æ¯”ç‡ï¼‰
statistics(opts['x']).round(3)

# 1. æ”¶ç›Šç‡ä¸ºç»™å®šå€¼ï¼›2. æƒé‡ä¹‹å’Œä¸º1ï¼›3. æƒé‡çš„ä¸Šä¸‹ç•Œ
cons = ({'type': 'eq', 'fun': lambda x:  statistics(x)[0] - tret},
        {'type': 'eq', 'fun': lambda x:  np.sum(x) - 1})
bnds = tuple((0, 1) for x in weights)
# æœ€å°åŒ–æ ‡å‡†å·®
def min_func_port(weights):
    return statistics(weights)[1]
# ç»™å®šå¤šä¸ªæ”¶ç›Šç‡
trets = np.linspace(0.0, 0.25, 50)
tvols = []
for tret in trets:
    cons = ({'type': 'eq', 'fun': lambda x:  statistics(x)[0] - tret},
            {'type': 'eq', 'fun': lambda x:  np.sum(x) - 1})
    res = sco.minimize(min_func_port, noa * [1. / noa,], method='SLSQP',
                       bounds=bnds, constraints=cons)
    tvols.append(res['fun'])
tvols = np.array(tvols)
# xè¡¨ç¤ºä¸€ä¸Šæ±‚å‡ºçš„æœ€ä¼˜æŠ•èµ„ç»„åˆï¼Œçº¢æ˜Ÿè¡¨ç¤ºæœ€ä¼˜å¤æ™®æ¯”æŠ•èµ„ç»„åˆï¼Œé»„æ˜Ÿè¡¨ç¤ºæœ€å°æ–¹å·®æŠ•èµ„ç»„åˆ
plt.figure(figsize=(8, 4))
plt.scatter(pvols, prets,
            c=prets / pvols, marker='o')
            # random portfolio composition
plt.scatter(tvols, trets,
            c=trets / tvols, marker='x')
            # efficient frontier
plt.plot(statistics(opts['x'])[1], statistics(opts['x'])[0],
         'r*', markersize=15.0)
            # portfolio with highest Sharpe ratio
plt.plot(statistics(optv['x'])[1], statistics(optv['x'])[0],
         'y*', markersize=15.0)
            # minimum variance portfolio
plt.grid(True)
plt.xlabel('expected volatility')
plt.ylabel('expected return')
plt.colorbar(label='Sharpe ratio')
```

æ— é£é™©æŠ•èµ„çš„åŠ å…¥

> æ— é£é™©æŠ•èµ„ç»„åˆçš„é…ç½®ï¼šæ— é£é™©æ”¶ç›Šç‡ä¸æŠ•èµ„ç»„åˆçš„è¿çº¿
>
> è¿‡æ— é£é™©æŠ•èµ„ç»„åˆçš„ç‚¹ï¼ˆæ”¶ç›Šç‡ä¸ºæ— é£é™©æ”¶ç›Šç‡ï¼Œæ–¹å·®ä¸º0ï¼‰ä½œåˆ‡çº¿ä¸æœ‰æ•ˆè¾¹ç•Œç›¸åˆ‡ï¼Œåˆ‡ç‚¹æ˜¯æœ€ä¼˜æŠ•èµ„ç»„åˆ
>
> èµ„æœ¬å¸‚åœºçº¿ï¼šæ— é£é™©èµ„äº§å’Œæœ€é«˜å¤æ™®æ¯”ç‡çš„è¿çº¿

```python
# é¦–å…ˆæ‰¾åˆ°æœ‰æ•ˆè¾¹ç•Œï¼ˆä¹‹å‰æ±‚å¾—çš„ç‚¹ï¼‰
ind = np.argmin(tvols)
evols = tvols[ind:]
erets = trets[ind:]
# è¿›è¡Œ3æ¬¡æ ·æ¡æ’å€¼ï¼Œå¹¶æ±‚å…¶1é˜¶å¯¼æ•°
import scipy.interpolate as sci
tck = sci.splrep(evols, erets)
def f(x):
    ''' Efficient frontier function (splines approximation). '''
    return sci.splev(x, tck, der=0)
def df(x):
    ''' First derivative of efficient frontier function. '''
    return sci.splev(x, tck, der=1)
# è®¾åˆ‡ç‚¹ä¸º (ğœ,ğ‘Ÿ) ï¼Œåˆ™èµ„æœ¬-å¸‚åœºçº¿ ğ‘¡(ğ‘¥)=ğ‘+ğ‘ğ‘¥ ç¬¦åˆä»¥ä¸‹æ•°å­¦æ¡ä»¶
# ğ‘¡(0)=ğ‘=ğ‘Ÿğ‘“ 
# ğ‘¡(ğœ)=ğ‘+ğ‘ğœ=ğ‘“(ğœ) 
# ğ‘¡â€²(ğœ)=ğ‘=ğ‘“â€²(ğœ) 
# éœ€è¦æ±‚è§£ (ğ‘,ğ‘,ğœ)
# p[0] = a, p[1] = b, p[2] = ğœ
def equations(p, rf=0.01):
    eq1 = rf - p[0]
    eq2 = rf + p[1] * p[2] - f(p[2])
    eq3 = p[1] - df(p[2])
    return eq1, eq2, eq3
# åˆ©ç”¨fsolveå‡½æ•°æ±‚è§£è¯¥æ–¹ç¨‹ç»„ï¼Œéœ€è¦ç»™å®š (ğ‘,ğ‘,ğœ) çš„åˆå§‹å€¼
opt = sco.fsolve(equations, [0.01, 0.5, 0.15])

plt.figure(figsize=(8, 4))
plt.scatter(pvols, prets,
            c=(prets - 0.01) / pvols, marker='o')
            # random portfolio composition
plt.plot(evols, erets, 'g', lw=4.0)
            # efficient frontier
cx = np.linspace(0.0, 0.3)
plt.plot(cx, opt[0] + opt[1] * cx, lw=1.5)
            # capital market line
plt.plot(opt[2], f(opt[2]), 'r*', markersize=15.0) 
plt.grid(True)
plt.axhline(0, color='k', ls='--', lw=2.0)
plt.axvline(0, color='k', ls='--', lw=2.0)
plt.xlabel('expected volatility')
plt.ylabel('expected return')
plt.colorbar(label='Sharpe ratio')

# èµ„æœ¬å¸‚åœºçº¿ç»è¿‡æœ€å¤§å¤æ™®æ¯”ç‡çš„ç‚¹ï¼Œé€šè¿‡æ±‚æœ€å¤§å¤æ™®æ¯”ç‡ä¹Ÿå¯æ±‚å¾—èµ„æœ¬å¸‚åœºçº¿
# ç»™å®šæœ€ä¼˜æ”¶ç›Šç‡æ˜¯ä¹‹å‰ç®—å‡ºçš„æ”¶ç›Šç‡ï¼Œæ±‚æ–¹å·®æœ€å°
cons = ({'type': 'eq', 'fun': lambda x:  statistics(x)[0] - f(opt[2])},
        {'type': 'eq', 'fun': lambda x:  np.sum(x) - 1})
res = sco.minimize(min_func_port, noa * [1. / noa,], method='SLSQP',
                       bounds=bnds, constraints=cons)
# æ±‚å¤æ™®ç‡æœ€å¤§
def min_func_sharpe(weights):
    return -(statistics(weights)[0]-0.01)/statistics(weights)[1]
cons = ({'type': 'eq', 'fun': lambda x:  np.sum(x) - 1})
res = sco.minimize(min_func_sharpe, noa * [1. / noa,], method='SLSQP',
                       bounds=bnds, constraints=cons)
# ä¸¤ç§æ–¹æ³•ç®—å‡ºçš„resï¼ˆèµ„äº§ç»„åˆçš„æƒé‡ï¼‰ä¸€æ ·
```

